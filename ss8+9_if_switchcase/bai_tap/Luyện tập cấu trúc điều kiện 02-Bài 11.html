<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bài 11</title>
</head>
<body>
<div style="background-color: lightgray">
    <h2>Tính thuế thu nhập cá nhân</h2><br>
    <table>
        <tr>
            <th>Thu nhập tháng (thường tính bằng tiền lương ghi trên hợp đồng):</th>
        </tr>
        <tr>
            <td rowspan="2">
                <label for="thu_nhap_thang"></label>
                <input style="width: 200px" id="thu_nhap_thang" name="thu_nhap_thang" type="number" min="0">
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td style="margin-left: 0 px"><b>Lương đóng bảo hiểm:</b></td>
        </tr>
        <tr>
            <td rowspan="2">
                <label for="bao_hiem"></label>
                <input style="width: 200px" id="bao_hiem" name="bao_hiem" type="number" min="0">
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td><b>Số người phụ thuộc:</b></td>
        </tr>
        <tr>
            <td rowspan="2">
                <label for=phu_thuoc></label>
                <input style="width:200px" id="phu_thuoc" name="bao_hiem" type="number" min="0">
            </td>
        </tr>
    </table>
    <br>
    <button onclick="tinh()" style="width: 50px; background-color: gray; color: yellow" ><b>OK</b></button>
    <p>Mức đóng: BHXH (8%), BHYT (1.5%), BHTN (1%)</p>
    <b style="color: red">Bảo hiểm bắt buộc:</b>
    <p id="bh_bat_buoc"></p>
    <p>Giảm trừ bản thân = 11.000.000đ</p>
    <p>Giảm trừ người phụ thuộc :</p>
    <p id="gt_phu_thuoc"></p>
    <p>Thu nhập tính thuế : </p>
    <p id="tn_tinh_thue"></p>
    <p>Mức thuế áp dụng đối với mức thu nhập này là:</p>
    <p id="thue"></p>
    <b style="color: red">Thuế thu nhập cá nhân phải nộp:</b>
    <p id="ttncn"></p>
</div>
<script>
    function tinh() {
        let thunhapthang = +document.getElementById("thu_nhap_thang").value;
        let baohiem = +document.getElementById("bao_hiem").value;
        let nguoiphuthuoc = +document.getElementById("phu_thuoc").value;
        let bhbb = Math.round(baohiem*0.105);
        let phuthuoc = Math.round(nguoiphuthuoc*4400000);
        document.getElementById("gt_phu_thuoc").innerHTML = nguoiphuthuoc + " x 4400000 = " + phuthuoc + "đ";
        let tntinhthue = Math.round(thunhapthang-bhbb-11000000-phuthuoc);
        document.getElementById('tn_tinh_thue').innerHTML=thunhapthang+" - "+bhbb+" - 11000000 - "+phuthuoc+" = "+tntinhthue+"đ";
        if (tntinhthue>0){
            if (tntinhthue>5000000){
                if (tntinhthue>10000000){
                    if (tntinhthue>18000000){
                        if (tntinhthue>32000000){
                            if(tntinhthue>52000000){
                                if(tntinhthue>80000000){
                                    let mucthue = 0.35;
                                    document.getElementById("thue").innerHTML = "35% - 9850000";
                                    let ttncn = Math.round(tntinhthue*mucthue-9850000);
                                    document.getElementById("ttncn").innerHTML = tntinhthue+" x 35% - 9850000 = " +ttncn+"đ";
                                }else{
                                    let mucthue = 0.3;
                                    document.getElementById("thue").innerHTML = "30% - 5850000";
                                    let ttncn = Math.round(tntinhthue*mucthue-5850000);
                                    document.getElementById("ttncn").innerHTML = tntinhthue+" x 30% - 5850000 = " +ttncn+"đ";
                                }
                            }else{
                                let mucthue = 0.25;
                                document.getElementById("thue").innerHTML = "25% - 3250000";
                                let ttncn = Math.round(tntinhthue*mucthue-3250000);
                                document.getElementById("ttncn").innerHTML = tntinhthue+" x 25% - 3250000 = " +ttncn+"đ";
                            }
                        }else{
                            let mucthue = 0.2;
                            document.getElementById("thue").innerHTML = "20% - 1650000";
                            let ttncn = Math.round(tntinhthue*mucthue-1650000);
                            document.getElementById("ttncn").innerHTML = tntinhthue+" x 20% - 1650000 = " +ttncn+"đ";
                        }
                    }else{
                        let mucthue = 0.15;
                        document.getElementById("thue").innerHTML = "15% - 750000";
                        let ttncn = Math.round(tntinhthue*mucthue-750000);
                        document.getElementById("ttncn").innerHTML = tntinhthue+" x 15% -750000 = " +ttncn+"đ";
                    }
                }else{
                    let mucthue = 0.1;
                    document.getElementById("thue").innerHTML = "10% - 250000";
                    let ttncn = Math.round(tntinhthue*mucthue-250000);
                    document.getElementById("ttncn").innerHTML = tntinhthue+" x 10% -250000 = " +ttncn+"đ";
                }
            }else{
                let mucthue = 0.05;
                document.getElementById("thue").innerHTML = "5%";
                let ttncn = Math.round(tntinhthue*mucthue);
                document.getElementById("ttncn").innerHTML = tntinhthue+" x 5% = " +ttncn+"đ";
            }
        }else {
            document.getElementById("ttncn").innerHTML="Mức thu nhập này không phải nộp thuế thu nhập cá nhân";
        }
    }
</script>
</body>
</html>